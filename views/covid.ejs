<%- include('includes/header.ejs') %>

<div
  class=".d-inline-flex d-flex-row"
  style="margin-left: 0.7rem; margin-bottom: 0; height: 60px"
>
  <!-- Show list user of manager -->
  <% if (user.role === 'manager') { %>
  <div class="form-group" style="display: inline-block; margin-right: 1rem">
    <select
      name="user"
      id="selectUser"
      class="form-control"
      style="width: 30rem"
    >
      <option value="<%= user._id %>">Me</option>
      <% for (let staff of listStaff) { %>
      <!-- Set selected -->
      <% if (selectedUser._id.toString() === staff._id.toString()) { %>
      <option value="<%= staff._id %>" selected>
        <%= staff.name %> -- <%= staff.email %>
      </option>
      <% } else { %>
      <option value="<%= staff._id %>">
        <%= staff.name %> -- <%= staff.email %>
      </option>
      <% } %> <% } %>
    </select>
  </div>
  <button
    type="button"
    class="btn btn-primary"
    style="width: 5rem"
    onclick="selectUser()"
  >
    View
  </button>
  <a href="/covidPDF?user=<%=selectedUser._id%>"><button class="btn btn-secondary" style="width: 5rem">PDF</button></a>
  <% } %>
</div>
<div class="flex-container">
  <div class="flex-column" style="width: 33%">
    <div class="card">
      <div class="card-body">
        <h4>Đăng ký nhiệt độ thân thể</h4>
        <button class="btn btn-primary" onclick="formTemperature()">
          Nhập thông tin
        </button>
        <div id="formTemperature"></div>
        <% for (let t of selectedUser.temperature) { %>
        <hr />
        <div>
          <p>Thời gian: <%= t.time.toLocaleString() %></p>
          <p>Nhiệt độ: <%= t.value %></p>
        </div>
        <% } %>
      </div>
    </div>
  </div>
  <div class="flex-column" style="width: 33%">
    <div class="card">
      <div class="card-body">
        <h4>Đăng ký thông tin tiêm vaccine</h4>
        <button class="btn btn-primary" onclick="formVaccine()">
          Nhập thông tin
        </button>
        <div id="formVaccine"></div>
        <% for (let t of selectedUser.vaccine) { %>
        <hr />
        <div>
          <p>
            Ngày tiêm: <%= t.date.getDate() %>/<%= t.date.getMonth()+1 %>/<%=
            t.date.getFullYear() %>
          </p>
          <p>Loại vaccine: <%= t.typeOfvaccine %></p>
          <p>Mũi thứ: <%= t.serial %></p>
        </div>
        <% } %>
      </div>
    </div>
  </div>
  <div class="flex-column" style="width: 33%">
    <div class="card">
      <div class="card-body">
        <h4>Đăng ký thông tin dương tính với covid</h4>
        <button class="btn btn-primary" onclick="formCovid()">
          Nhập thông tin
        </button>
        <div id="formCovid"></div>
        <% for (let t of selectedUser.haveCovid) { %>
        <hr />
        <div>
          <p>
            Ngày: <%= t.date.getDate() %>/<%= t.date.getMonth()+1 %>/<%=
            t.date.getFullYear() %>
          </p>
          <p>
            Trạng thái: <% if (t.status) { %>Mắc covid<% } else { %>Đã khỏi<% }
            %>
          </p>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</div>

<!-- Script -->
<%- include('includes/footer.ejs') %>
